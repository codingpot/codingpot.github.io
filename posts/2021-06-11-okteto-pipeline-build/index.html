<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Okteto 파이프라인 개요, okteto build, pr12er 서버용 Dockerfile 분석 | 코딩냄비 부글부글</title><meta name=description content="코딩냄비 프로젝트를 진행하며 배운것을 기록합니다."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Okteto 파이프라인 개요, okteto build, pr12er 서버용 Dockerfile 분석"><meta property="og:description" content="코딩냄비 프로젝트 중 pr12er는 TensorFlow Korea의 논문을 읽고/리뷰하는 모임 PR12에서 촬영된 동영상을 큐레이션하는 프로젝트입니다. 개략적으로 프론트엔드는 Flutter, 백엔드는 GO로 작성되었으며, 이 둘간의 인터페이스는 gRPC/protobuf로 구성되어있습니다. 특히 pr12er 프로젝트의 백엔드 서버는 PR이 Merge 됨과 동시에 Okteto가 제공하는k8s 에 배포되는 CD 루틴을 탑니다.
 이 글은 Okteto 에 배포하기위한 파이프라인을 분석하는 총 X 편의 시리즈물 중 첫 번째입니다.
 Okteto 파이프라인 개요, okteto build, pr12er 서버용 Dockerfile 분석 Okteto에 gRPC용 Deployment, Service, Ingress 설정 정적 yaml 파일의 설정을 동적으로 바꾸기  Okteto 파이프라인의 개요 말 그대로 Okteto에 원하는 애플리케이션을 배포하는 일련의 과정(파이프라인)을 정의하는 방법입니다."><meta property="og:type" content="article"><meta property="og:url" content="https://codingpot.github.io/posts/2021-06-11-okteto-pipeline-build/"><meta property="article:published_time" content="2021-06-11T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-11T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Okteto 파이프라인 개요, okteto build, pr12er 서버용 Dockerfile 분석"><meta name=twitter:description content="코딩냄비 프로젝트 중 pr12er는 TensorFlow Korea의 논문을 읽고/리뷰하는 모임 PR12에서 촬영된 동영상을 큐레이션하는 프로젝트입니다. 개략적으로 프론트엔드는 Flutter, 백엔드는 GO로 작성되었으며, 이 둘간의 인터페이스는 gRPC/protobuf로 구성되어있습니다. 특히 pr12er 프로젝트의 백엔드 서버는 PR이 Merge 됨과 동시에 Okteto가 제공하는k8s 에 배포되는 CD 루틴을 탑니다.
 이 글은 Okteto 에 배포하기위한 파이프라인을 분석하는 총 X 편의 시리즈물 중 첫 번째입니다.
 Okteto 파이프라인 개요, okteto build, pr12er 서버용 Dockerfile 분석 Okteto에 gRPC용 Deployment, Service, Ingress 설정 정적 yaml 파일의 설정을 동적으로 바꾸기  Okteto 파이프라인의 개요 말 그대로 Okteto에 원하는 애플리케이션을 배포하는 일련의 과정(파이프라인)을 정의하는 방법입니다."><link rel=stylesheet href=https://codingpot.github.io/css/style-white.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://codingpot.github.io/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://codingpot.github.io/intro/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://codingpot.github.io/posts/2021-06-11-buf-intro/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');" aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&text=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&title=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&is_video=false&description=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d&body=Check out this article: https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&title=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&title=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&name=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d&description=%ec%bd%94%eb%94%a9%eb%83%84%eb%b9%84%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ec%a4%91%20pr12er%eb%8a%94%20TensorFlow%20Korea%ec%9d%98%20%eb%85%bc%eb%ac%b8%ec%9d%84%20%ec%9d%bd%ea%b3%a0%2f%eb%a6%ac%eb%b7%b0%ed%95%98%eb%8a%94%20%eb%aa%a8%ec%9e%84%20PR12%ec%97%90%ec%84%9c%20%ec%b4%ac%ec%98%81%eb%90%9c%20%eb%8f%99%ec%98%81%ec%83%81%ec%9d%84%20%ed%81%90%eb%a0%88%ec%9d%b4%ec%85%98%ed%95%98%eb%8a%94%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%ec%9e%85%eb%8b%88%eb%8b%a4.%20%ea%b0%9c%eb%9e%b5%ec%a0%81%ec%9c%bc%eb%a1%9c%20%ed%94%84%eb%a1%a0%ed%8a%b8%ec%97%94%eb%93%9c%eb%8a%94%20Flutter%2c%20%eb%b0%b1%ec%97%94%eb%93%9c%eb%8a%94%20GO%eb%a1%9c%20%ec%9e%91%ec%84%b1%eb%90%98%ec%97%88%ec%9c%bc%eb%a9%b0%2c%20%ec%9d%b4%20%eb%91%98%ea%b0%84%ec%9d%98%20%ec%9d%b8%ed%84%b0%ed%8e%98%ec%9d%b4%ec%8a%a4%eb%8a%94%20gRPC%2fprotobuf%eb%a1%9c%20%ea%b5%ac%ec%84%b1%eb%90%98%ec%96%b4%ec%9e%88%ec%8a%b5%eb%8b%88%eb%8b%a4.%20%ed%8a%b9%ed%9e%88%20pr12er%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%ec%9d%98%20%eb%b0%b1%ec%97%94%eb%93%9c%20%ec%84%9c%eb%b2%84%eb%8a%94%20PR%ec%9d%b4%20Merge%20%eb%90%a8%ea%b3%bc%20%eb%8f%99%ec%8b%9c%ec%97%90%20Okteto%ea%b0%80%20%ec%a0%9c%ea%b3%b5%ed%95%98%eb%8a%94k8s%20%ec%97%90%20%eb%b0%b0%ed%8f%ac%eb%90%98%eb%8a%94%20CD%20%eb%a3%a8%ed%8b%b4%ec%9d%84%20%ed%83%91%eb%8b%88%eb%8b%a4.%0a%20%ec%9d%b4%20%ea%b8%80%ec%9d%80%20Okteto%20%ec%97%90%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0%ec%9c%84%ed%95%9c%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%ec%9d%84%20%eb%b6%84%ec%84%9d%ed%95%98%eb%8a%94%20%ec%b4%9d%20X%20%ed%8e%b8%ec%9d%98%20%ec%8b%9c%eb%a6%ac%ec%a6%88%eb%ac%bc%20%ec%a4%91%20%ec%b2%ab%20%eb%b2%88%ec%a7%b8%ec%9e%85%eb%8b%88%eb%8b%a4.%0a%20Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d%20Okteto%ec%97%90%20gRPC%ec%9a%a9%20Deployment%2c%20Service%2c%20Ingress%20%ec%84%a4%ec%a0%95%20%ec%a0%95%ec%a0%81%20yaml%20%ed%8c%8c%ec%9d%bc%ec%9d%98%20%ec%84%a4%ec%a0%95%ec%9d%84%20%eb%8f%99%ec%a0%81%ec%9c%bc%eb%a1%9c%20%eb%b0%94%ea%be%b8%ea%b8%b0%20%20Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%ec%9d%98%20%ea%b0%9c%ec%9a%94%20%eb%a7%90%20%ea%b7%b8%eb%8c%80%eb%a1%9c%20Okteto%ec%97%90%20%ec%9b%90%ed%95%98%eb%8a%94%20%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%ec%9d%84%20%eb%b0%b0%ed%8f%ac%ed%95%98%eb%8a%94%20%ec%9d%bc%eb%a0%a8%ec%9d%98%20%ea%b3%bc%ec%a0%95%28%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%29%ec%9d%84%20%ec%a0%95%ec%9d%98%ed%95%98%eb%8a%94%20%eb%b0%a9%eb%b2%95%ec%9e%85%eb%8b%88%eb%8b%a4." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&t=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#okteto-파이프라인의-개요><code>Okteto</code> 파이프라인의 개요</a><ul><li><a href=#pr12er에-적용된-okteto-파이프라인-명세서><code>pr12er</code>에 적용된 <code>Okteto</code> 파이프라인 명세서</a></li><li><a href=#okteto-build-명령어><code>okteto build</code> 명령어</a></li><li><a href=#pr12er-서버용-dockerfile><code>pr12er</code> 서버용 <code>Dockerfile</code></a></li></ul></li><li><a href=#참고자료>참고자료</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Okteto 파이프라인 개요, okteto build, pr12er 서버용 Dockerfile 분석</h1><div class=meta><div class=postdate><time datetime="2021-06-11 00:00:00 +0000 UTC" itemprop=datePublished>2021-06-11</time></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/okteto rel=tag>okteto</a></div></div></header><div class=content itemprop=articleBody><blockquote><p>코딩냄비 프로젝트 중 <code>pr12er</code>는 TensorFlow Korea의 논문을 읽고/리뷰하는 모임 PR12에서 촬영된 동영상을 큐레이션하는 프로젝트입니다. 개략적으로 프론트엔드는 <code>Flutter</code>, 백엔드는 <code>GO</code>로 작성되었으며, 이 둘간의 인터페이스는 <code>gRPC/protobuf</code>로 구성되어있습니다. 특히 <code>pr12er</code> 프로젝트의 백엔드 서버는 <code>PR</code>이 <code>Merge</code> 됨과 동시에 <code>Okteto</code>가 제공하는<code>k8s</code> 에 배포되는 <code>CD</code> 루틴을 탑니다.</p></blockquote><p>이 글은 <code>Okteto</code> 에 배포하기위한 파이프라인을 분석하는 총 X 편의 시리즈물 중 첫 번째입니다.</p><ol><li><a href=https://codingpot.github.io/cicd/okteto-pipeline-build/><code>Okteto</code> 파이프라인 개요, <code>okteto build</code>, <code>pr12er</code> 서버용 <code>Dockerfile</code> 분석</a></li><li><a href=https://codingpot.github.io/posts/2021-06-16-okteto-kubectl-apply/><strong>Okteto</strong>에 gRPC용 <strong>Deployment</strong>, <strong><strong>Service</strong></strong>, <strong>Ingress</strong> 설정</a></li><li><a href=https://codingpot.github.io/posts/2021-06-16-okteto-kubectl-set/><strong>정적 yaml 파일의 설정을 동적으로 바꾸기</strong></a></li></ol><h2 id=okteto-파이프라인의-개요><code>Okteto</code> 파이프라인의 개요</h2><p>말 그대로 <code>Okteto</code>에 원하는 애플리케이션을 배포하는 일련의 과정(파이프라인)을 정의하는 방법입니다. 일반적으로 <code>okteto-pipeline.yaml</code> 이라는 파일로 작성되며, 그 과정은 다음과 같습니다.</p><p>1.애플리케이션에 대한 도커 이미지를 빌드한 후 <code>Okteto</code> 레지스트리에 해당 이미지를 올리는 과정
2.<code>kubectl</code> 명령어로 <code>Deployment</code>, <code>Service</code> 등을 <code>k8s</code> 에 설정</p><h3 id=pr12er에-적용된-okteto-파이프라인-명세서><code>pr12er</code>에 적용된 <code>Okteto</code> 파이프라인 명세서</h3><p>다음은 <code>pr12er</code> 에서 정의한 <code>okteto-pipeline.yaml</code>이며, 이번 게시글에서는 그 중 첫 번째인 <code>okteto build</code> 명령어를 분석합니다.</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#5bc4bf>deploy</span>:
  - <span style=color:#f99b15>okteto build -t okteto.dev/codingpot-pr12er-server:${OKTETO_GIT_COMMIT} -f ./server/deploy/Dockerfile server</span>
  - <span style=color:#f99b15>for file in k8s/kkweon-okteto/*.yaml; do envsubst &lt; $file | kubectl apply -f -; done</span>
  - <span style=color:#f99b15>kubectl set image deployment server server=okteto.dev/codingpot-pr12er-server:${OKTETO_GIT_COMMIT}</span>
  - <span style=color:#f99b15>kubectl rollout restart deployment grafana-agent</span>
  - <span style=color:#f99b15>kubectl rollout status deployment server &amp;&amp; kubectl rollout status deployment grafana-agent</span>
</code></pre></td></tr></table></div></div><p>// TODO 전체적인 설명 (매우 간단히)</p><h3 id=okteto-build-명령어><code>okteto build</code> 명령어</h3><p><a href=https://okteto.com/docs/reference/cli#build>공식문서</a>에 따르면 <code>okteto build</code> 명령어는 다음과 같은 일을 합니다. 이 내용을 가지고, 약간의 옵션 플래그를 더한 <code>pre12er</code>용 <code>okteto-pipeline.yaml</code>의 <code>okteto build</code> 가 하는일을 살펴보죠.</p><blockquote><p><code>Dockerfile</code>로부터 이미지를 빌드하여 <code>Okteto</code>의 레지스트리에 등록</p></blockquote><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#5bc4bf>deploy</span>:
  - <span style=color:#f99b15>okteto build -t okteto.dev/codingpot-pr12er-server:${OKTETO_GIT_COMMIT} -f ./server/deploy/Dockerfile server</span>
</code></pre></td></tr></table></div></div><p><strong><code>-t</code> 옵션</strong></p><ul><li>빌드될 이미지명과 태그를 설정합니다. 여기서 설정된 이름으로 <code>Okteto</code> 레지스트리에 등록됩니다.</li></ul><p><strong><code>-f</code> 옵션</strong></p><ul><li>빌드시 사용할 <code>Dockerfile</code>의 위치(path)를 명시합니다.</li></ul><p><strong>마지막 <code>server</code></strong></p><ul><li><code>Dockerfile</code>가 빌드할 디렉터리 대상을 지정합니다.</li></ul><p>이를 종합적으로 풀어서 설명하면, <code>server</code> 라는 디렉터리를 참조하여 <code>./server/deploy/</code>에 위치한 <code>Dockerfile</code>로 <code>okteto.dev/codingpot-pr12er-server:${OKTETO_GIT_COMMIT}</code> 라는 이름의 이미지를 빌드하여 <code>Okteto</code> 레지스트리에 등록하라는 뜻이됩니다.</p><h3 id=pr12er-서버용-dockerfile><code>pr12er</code> 서버용 <code>Dockerfile</code></h3><p>그렇다면 <code>Dockerfile</code>은 어떻게 생겼을지도 살펴보겠습니다. 이는 <code>Okteto</code>와는 무관하지만, <code>GO</code> 언어를 사용한 <code>gRPC/protobuf</code> 프로젝트를 위한 기본 골격을 파악하는데 도움이 될 수 있습니다.</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=color:#815ba4>FROM</span><span style=color:#48b685> golang:1.16-alpine AS builder</span><span style=color:#ef6155>
</span><span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>RUN</span> apk --no-cache add ca-certificates <span style=color:#5bc4bf>&amp;&amp;</span> <span style=color:#ef6155>GRPC_HEALTH_PROBE_VERSION</span><span style=color:#5bc4bf>=</span>v0.4.2 <span style=color:#5bc4bf>&amp;&amp;</span> <span style=color:#f99b15>\
</span><span style=color:#f99b15></span>  wget -qO/bin/grpc_health_probe https://github.com/grpc-ecosystem/grpc-health-probe/releases/download/<span style=color:#f99b15>${</span><span style=color:#ef6155>GRPC_HEALTH_PROBE_VERSION</span><span style=color:#f99b15>}</span>/grpc_health_probe-linux-amd64 <span style=color:#5bc4bf>&amp;&amp;</span> <span style=color:#f99b15>\
</span><span style=color:#f99b15></span>  chmod +x /bin/grpc_health_probe<span style=color:#ef6155>
</span><span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>WORKDIR</span><span style=color:#48b685> /src/</span><span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>COPY</span> go.mod .<span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>COPY</span> go.sum .<span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>RUN</span> go mod download<span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>COPY</span> . .<span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>RUN</span> <span style=color:#ef6155>CGO_ENABLED</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>0</span> <span style=color:#ef6155>GOOS</span><span style=color:#5bc4bf>=</span>linux go build -ldflags <span style=color:#48b685>&#34;-w -s&#34;</span> -o server cmd/server/main.go<span style=color:#ef6155>
</span><span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>FROM</span><span style=color:#48b685> gcr.io/distroless/static:nonroot</span><span style=color:#ef6155>
</span><span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>COPY</span> --from<span style=color:#5bc4bf>=</span>builder /src/server .<span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>COPY</span> --from<span style=color:#5bc4bf>=</span>builder /bin/grpc_health_probe /bin/grpc_health_probe<span style=color:#ef6155>
</span><span style=color:#ef6155>
</span><span style=color:#ef6155></span><span style=color:#815ba4>ENTRYPOINT</span> [<span style=color:#48b685>&#34;./server&#34;</span>]<span style=color:#ef6155>
</span></code></pre></td></tr></table></div></div><p>우선 <code>FROM</code>이라는 지시자는 새로운 빌드 스테이지를 초기화하며, 이어지는 지시자가 적용될 대상 베이스 이미지로 설정합니다. 상기 <code>Dockerfile</code>에는 <code>FROM</code> 지시자가 두 개 등장하는 데, 이는 빌드 스테이지가 여러개임을 뜻합니다. <strong>첫 번째</strong> <code>FROM</code>의 이미지에서 작업된 내역을 <strong>두 번째</strong> <code>FROM</code>으로 전달하여 최종 이미지는 <strong>두 번째</strong>의것이 되는것이죠. 이 방식은 주로 애플리케이션을 컴파일/빌드하기 위한 여러가지 디펜던시를 담아 애플리케이션의 컴파일/빌드를 수행한 다음, 해당 애플리케이션의 실행 가능한 바이너리 파일만을 <strong>경량</strong> 이미지에 옮겨 이미지의 사이즈를 최소화하는 데 많이 활용됩니다.</p><ul><li><code>golang:1.16-alpine</code> 이미지는 <a href=https://hub.docker.com/_/alpine><code>alpine</code></a> 이라는 리눅스 배포판에 기초하여 <code>GO</code> 언어까지가 함께 설치된 것입니다.</li><li><a href=https://github.com/GoogleContainerTools/distroless><code>gcr.io/distroless/static:nonroot</code></a> 는 오로지 구동될 애플리케이션과 런타임 디펜던시만을 포함하고, 기타 일반적인 리눅스에서 제공하는 다양한 패키지(쉘 포함)를 제외한 초경량 이미지입니다. 이에 대한 더 자세한 설명은 게시글 하단의 레퍼런스를 참고하세요.</li></ul><p>그렇다면 두 <code>FROM</code> 사이에서 첫 번째 <code>FROM</code>이 해야할 일은 명확합니다. 애플리케이션을 빌드한 바이너리 파일, 그리고 그 애플리케이션을 구동하는 데 필요한 런타임 디펜던시를 구축하는 것이죠. 그렇게 구축된것을 두 번째 <code>FROM</code>에 심어주기 위함입니다.</p><p><strong><code>WORKDIR /src/</code></strong></p><ul><li>첫 번째 <code>FROM</code> 이미지에서 작업할 디렉터리를 지정합니다.</li></ul><p><strong><code>COPY go.mod .</code>, <code>COPY go.sum .</code></strong></p><ul><li>프로젝트에 필요한 모듈 디펜던시와 각 디펜던시에 대한 체크섬이 명시된 두 파일을 현재 작업 디렉터리로 복사합니다.</li><li><code>COPY</code> 지시자의 첫 번째 인자는 앞서 지정된 <code>server</code> 라는 디렉터리를 기준으로 복사될 파일명을 명시하며, 두 번째 인자는 파일이 복사되어 저장될 이미지내 디렉터리를 명시합니다(즉 <code>WORKDIR</code>).</li></ul><p><strong><code>RUN go mod download</code></strong></p><ul><li>디펜던시에대한 명세서만 있을 뿐, 현재 이미지에는 해당 디펜던시가 없기 때문에, 명세서를 참조하여 모듈을 다운로드 받습니다.</li></ul><p><strong><code>COPY . .</code></strong></p><ul><li>디펜던시 외 프로젝트를 구동하는데 필요한 모든 파일을 복사합니다.</li></ul><p><strong><code>RUN ... go build ... -o server cmd/server/main.go</code></strong></p><ul><li>이후 <code>go build</code> 명령어로 <code>cmd/server/main.go</code> 라는 파일을 바이너리 파일로 빌드하고, 그 바이너리 파일의 이름을 <code>server</code>라고 명명합니다.</li></ul><p>이제 구동될 애플리케이션을 빌드하였으니, 실제 애플리케이션 구동에 필요없는 파일들(소스 파일 등)을 제외하고 두 번째 <code>FROM</code> 이미지로 복사합니다. 이 과정은 실제 이미지가 올라갔을 때 최초로 실행되는 지점인 <code>ENTRYPOINT</code> 지시자 이전까지에 해당합니다.</p><p><strong><code>COPY --from=builder /src/server .</code></strong></p><ul><li><code>--from=builder</code> 라는 플래그가 새롭게 추가된 <code>COPY</code> 지시자 입니다. 앞서 첫 번째 <code>FROM</code> 지시자에서 <code>as builder</code> 라고 적은것은 나중에 해당 빌드 스테이지를 참조하기위한 별칭을 지정한 것입니다.</li><li>따라서 <code>builder</code> 스테이지에서 <code>go build</code>로 만들어진 바이너리 파일인 <code>server</code>를 현재 이미지에 복사한다는 뜻이됩니다. 이때 <code>/src/server</code>인 이유는 첫 번째 스테이지에서 작업 디렉터리가 <code>/src/</code>로 지정되어, 만들어진 <code>server</code> 바이너리 파일이 <code>/src/</code> 디렉터리내 위치하기 때문입니다.</li></ul><p><strong><code>COPY --from=builder /bin/grpc_health_probe /bin/grpc_health_probe</code></strong></p><ul><li><code>grpc_health_probe</code>는 <code>gRPC</code> 서버의 실행여부를 판단하는 데 쓰이는 유틸리티 프로그램입니다. 이 프로그램은 첫 번째 빌드 스테이지 중 <code>RUN</code> 지시자에서 <code>wget</code>을 통해 다운로드 받은것을 그대로 복사한 것입니다.</li><li>두 번째 스테이지에서 다운로드 받지 <strong>못한</strong> 이유는 초경량 이미지여서 <code>wget</code> 명령어조차 들어있지 않기 때문입니다.</li></ul><h2 id=참고자료>참고자료</h2><ul><li><strong>Okteto</strong><ul><li><a href=https://okteto.com/>https://okteto.com/</a></li></ul></li><li><strong>Golang Images</strong><ul><li><a href=https://hub.docker.com/_/golang>https://hub.docker.com/_/golang</a></li></ul></li><li><strong>Distroless Image</strong><ul><li><a href=https://github.com/GoogleContainerTools/distroless>https://github.com/GoogleContainerTools/distroless</a></li></ul></li><li><strong>Best practices for building containers</strong><ul><li><a href=https://cloud.google.com/architecture/best-practices-for-building-containers>https://cloud.google.com/architecture/best-practices-for-building-containers</a></li></ul></li><li><strong>Distroless Containers: Hype or True Value?</strong><ul><li><a href=https://hackernoon.com/distroless-containers-hype-or-true-value-2rfl3wat>https://hackernoon.com/distroless-containers-hype-or-true-value-2rfl3wat</a></li></ul></li></ul></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#okteto-파이프라인의-개요><code>Okteto</code> 파이프라인의 개요</a><ul><li><a href=#pr12er에-적용된-okteto-파이프라인-명세서><code>pr12er</code>에 적용된 <code>Okteto</code> 파이프라인 명세서</a></li><li><a href=#okteto-build-명령어><code>okteto build</code> 명령어</a></li><li><a href=#pr12er-서버용-dockerfile><code>pr12er</code> 서버용 <code>Dockerfile</code></a></li></ul></li><li><a href=#참고자료>참고자료</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&text=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&title=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&is_video=false&description=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d&body=Check out this article: https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&title=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&title=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&name=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d&description=%ec%bd%94%eb%94%a9%eb%83%84%eb%b9%84%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%20%ec%a4%91%20pr12er%eb%8a%94%20TensorFlow%20Korea%ec%9d%98%20%eb%85%bc%eb%ac%b8%ec%9d%84%20%ec%9d%bd%ea%b3%a0%2f%eb%a6%ac%eb%b7%b0%ed%95%98%eb%8a%94%20%eb%aa%a8%ec%9e%84%20PR12%ec%97%90%ec%84%9c%20%ec%b4%ac%ec%98%81%eb%90%9c%20%eb%8f%99%ec%98%81%ec%83%81%ec%9d%84%20%ed%81%90%eb%a0%88%ec%9d%b4%ec%85%98%ed%95%98%eb%8a%94%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%ec%9e%85%eb%8b%88%eb%8b%a4.%20%ea%b0%9c%eb%9e%b5%ec%a0%81%ec%9c%bc%eb%a1%9c%20%ed%94%84%eb%a1%a0%ed%8a%b8%ec%97%94%eb%93%9c%eb%8a%94%20Flutter%2c%20%eb%b0%b1%ec%97%94%eb%93%9c%eb%8a%94%20GO%eb%a1%9c%20%ec%9e%91%ec%84%b1%eb%90%98%ec%97%88%ec%9c%bc%eb%a9%b0%2c%20%ec%9d%b4%20%eb%91%98%ea%b0%84%ec%9d%98%20%ec%9d%b8%ed%84%b0%ed%8e%98%ec%9d%b4%ec%8a%a4%eb%8a%94%20gRPC%2fprotobuf%eb%a1%9c%20%ea%b5%ac%ec%84%b1%eb%90%98%ec%96%b4%ec%9e%88%ec%8a%b5%eb%8b%88%eb%8b%a4.%20%ed%8a%b9%ed%9e%88%20pr12er%20%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8%ec%9d%98%20%eb%b0%b1%ec%97%94%eb%93%9c%20%ec%84%9c%eb%b2%84%eb%8a%94%20PR%ec%9d%b4%20Merge%20%eb%90%a8%ea%b3%bc%20%eb%8f%99%ec%8b%9c%ec%97%90%20Okteto%ea%b0%80%20%ec%a0%9c%ea%b3%b5%ed%95%98%eb%8a%94k8s%20%ec%97%90%20%eb%b0%b0%ed%8f%ac%eb%90%98%eb%8a%94%20CD%20%eb%a3%a8%ed%8b%b4%ec%9d%84%20%ed%83%91%eb%8b%88%eb%8b%a4.%0a%20%ec%9d%b4%20%ea%b8%80%ec%9d%80%20Okteto%20%ec%97%90%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0%ec%9c%84%ed%95%9c%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%ec%9d%84%20%eb%b6%84%ec%84%9d%ed%95%98%eb%8a%94%20%ec%b4%9d%20X%20%ed%8e%b8%ec%9d%98%20%ec%8b%9c%eb%a6%ac%ec%a6%88%eb%ac%bc%20%ec%a4%91%20%ec%b2%ab%20%eb%b2%88%ec%a7%b8%ec%9e%85%eb%8b%88%eb%8b%a4.%0a%20Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d%20Okteto%ec%97%90%20gRPC%ec%9a%a9%20Deployment%2c%20Service%2c%20Ingress%20%ec%84%a4%ec%a0%95%20%ec%a0%95%ec%a0%81%20yaml%20%ed%8c%8c%ec%9d%bc%ec%9d%98%20%ec%84%a4%ec%a0%95%ec%9d%84%20%eb%8f%99%ec%a0%81%ec%9c%bc%eb%a1%9c%20%eb%b0%94%ea%be%b8%ea%b8%b0%20%20Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%ec%9d%98%20%ea%b0%9c%ec%9a%94%20%eb%a7%90%20%ea%b7%b8%eb%8c%80%eb%a1%9c%20Okteto%ec%97%90%20%ec%9b%90%ed%95%98%eb%8a%94%20%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%ec%9d%84%20%eb%b0%b0%ed%8f%ac%ed%95%98%eb%8a%94%20%ec%9d%bc%eb%a0%a8%ec%9d%98%20%ea%b3%bc%ec%a0%95%28%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%29%ec%9d%84%20%ec%a0%95%ec%9d%98%ed%95%98%eb%8a%94%20%eb%b0%a9%eb%b2%95%ec%9e%85%eb%8b%88%eb%8b%a4." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fcodingpot.github.io%2fposts%2f2021-06-11-okteto-pipeline-build%2f&t=Okteto%20%ed%8c%8c%ec%9d%b4%ed%94%84%eb%9d%bc%ec%9d%b8%20%ea%b0%9c%ec%9a%94%2c%20okteto%20build%2c%20pr12er%20%ec%84%9c%eb%b2%84%ec%9a%a9%20Dockerfile%20%eb%b6%84%ec%84%9d" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick="$('#nav-footer').toggle();return false;" aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc-toggle class=icon href=# onclick="$('#toc-footer').toggle();return false;" aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share-toggle class=icon href=# onclick="$('#share-footer').toggle();return false;" aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2021 코딩냄비</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All posts</a></li><li><a href=/tags>Tags</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script></html>