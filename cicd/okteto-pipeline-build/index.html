<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Okteto 파이프라인(빌드) | 코딩냄비 부글부글</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Okteto 파이프라인(빌드)"><meta property="og:description" content="현재 코딩냄비 프로젝트 중 pr12er 에서 배포하는 방식을 그대로 분석한 포스트다. pr12er 프로젝트에서는 쿠버네티스 클러스터의 네임스페이스를 임대해주는 Okteto 라는 서비스를 활용해 구현된 서비스를 배포한다. 살펴봐야 할 내용이 많으므로, 하나씩 분석한다.
Okteto로 디플로이 하기위한 파이프라인 중 가장 먼저 살펴볼 것은 okteto build 명령어이다. pr12er에서는 루트 디렉터리의okteto-pipeline.yaml 파일 가장 첫 번째 라인에서 사용되며, 아래는 그 한 줄을 보여준다.
deploy - okteto build -t okteto.dev/이미지명:${OKTETO_GIT_COMMIT} -f ./server/deploy/Dockerfile server okteto build CLI의 공식문서에 따르면, 이 명령어는 Dockerfile로부터 이미지를 빌드하고, 지정된 registry에 빌드된 이미지를 push 하는 역할을 수행한다."><meta property="og:type" content="article"><meta property="og:url" content="https://codingpot.github.io/cicd/okteto-pipeline-build/"><meta property="article:published_time" content="2021-01-01T00:00:00+00:00"><meta property="article:modified_time" content="2021-01-01T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Okteto 파이프라인(빌드)"><meta name=twitter:description content="현재 코딩냄비 프로젝트 중 pr12er 에서 배포하는 방식을 그대로 분석한 포스트다. pr12er 프로젝트에서는 쿠버네티스 클러스터의 네임스페이스를 임대해주는 Okteto 라는 서비스를 활용해 구현된 서비스를 배포한다. 살펴봐야 할 내용이 많으므로, 하나씩 분석한다.
Okteto로 디플로이 하기위한 파이프라인 중 가장 먼저 살펴볼 것은 okteto build 명령어이다. pr12er에서는 루트 디렉터리의okteto-pipeline.yaml 파일 가장 첫 번째 라인에서 사용되며, 아래는 그 한 줄을 보여준다.
deploy - okteto build -t okteto.dev/이미지명:${OKTETO_GIT_COMMIT} -f ./server/deploy/Dockerfile server okteto build CLI의 공식문서에 따르면, 이 명령어는 Dockerfile로부터 이미지를 빌드하고, 지정된 registry에 빌드된 이미지를 push 하는 역할을 수행한다."><link rel=stylesheet href=https://codingpot.github.io/css/style-white.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://codingpot.github.io/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id=header><a href=https://codingpot.github.io/><div id=logo style=background-image:url(https://codingpot.github.io/images/logo.png)></div><div id=title><h1>코딩냄비 부글부글</h1></div></a><div id=nav><ul><li class=icon><a href=# aria-label=Menu><i class="fas fa-bars fa-2x" aria-hidden=true></i></a></li><li><a href=/>Home</a></li><li><a href=/cicd>CI/CD</a></li><li><a href=/mlops>MLOps</a></li></ul></div></header><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class=content itemprop=articleBody><p>현재 코딩냄비 프로젝트 중 <code>pr12er</code> 에서 배포하는 방식을 그대로 분석한 포스트다. <code>pr12er</code> 프로젝트에서는 쿠버네티스 클러스터의 네임스페이스를 임대해주는 <strong>Okteto</strong> 라는 서비스를 활용해 구현된 서비스를 배포한다. 살펴봐야 할 내용이 많으므로, 하나씩 분석한다.</p><p>Okteto로 디플로이 하기위한 파이프라인 중 가장 먼저 살펴볼 것은 <code>okteto build</code> 명령어이다. <code>pr12er</code>에서는 루트 디렉터리의<a href=https://github.com/codingpot/pr12er/blob/main/okteto-pipeline.yaml>okteto-pipeline.yaml</a> 파일 가장 첫 번째 라인에서 사용되며, 아래는 그 한 줄을 보여준다.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#ae81ff>deploy</span>
  - <span style=color:#ae81ff>okteto build -t okteto.dev/이미지명:${OKTETO_GIT_COMMIT} -f ./server/deploy/Dockerfile server</span>
</code></pre></div><p><strong>okteto build</strong> CLI의 <a href=https://okteto.com/docs/reference/cli#build>공식문서</a>에 따르면, 이 명령어는 <strong>Dockerfile</strong>로부터 이미지를 빌드하고, 지정된 <strong>registry</strong>에 빌드된 이미지를 <strong>push</strong> 하는 역할을 수행한다.</p><p><code>-t okteto.dev/이미지명:${OKTETO_GIT_COMMIT}</code></p><ul><li>빌드할 이미지명과 태그명을 지정한다.</li></ul><p><code>-f ./server/deploy/Dockerfile</code></p><ul><li>사용할 <code>Dockerfile</code>의 Path를 명시한다.</li></ul><p>마지막 <strong>server</strong></p><ul><li>이미지를 빌드할 대상 디렉터리를 지정한다.</li><li><code>Dockerfile</code>과 GO 프로젝트가 서로다른 곳에 위치하기 때문에, 명시적으로 지정한다.</li></ul></div></article><footer id=footer><div class=footer-left>Copyright &copy; 2021 코딩냄비 부글부글</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/cicd>CI/CD</a></li><li><a href=/mlops>MLOps</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script></html>